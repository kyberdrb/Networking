Install Privoxy:

  sudo apt-get update
  sudo apt-get upgrade
  sudo apt-get install privoxy
  sudo nano /etc/privoxy/config
	Edit line "listen-address" to your IP and port; usually your local IP address
	standard port

Save and exit. Restart privoxy:

  sudo service privoxy restart
  
Now we will check, if privoxy works.

Now set the proxy in your operating system / browser. After that you can enjoy
browsing almost without ads. Some ad will show, some pop-ups might show, the 
youtube ads are not blocked, but the vast majority of annoying ads will be gone
in entire network.
	
Now we're gonna import EasyList into privoxy for additional list of advertisment
domains and URLs.
It is not officialy supported and some utilities to provide the conversion are needed. 
But on the site
https://projects.zubr.me/wiki/adblock2privoxyDownloads
is an up-to-date EasyList, ready to be imported to privoxy. As I found out,
it is pretty sufficient. I am using only the action file, beacuse the filter file
slows down the browsing too much. Therefore I will not cover the filter file
setup.

You can also use adblock2privoxy utility to automatically update and convert
EasyList to privoxy. Link: https://projects.zubr.me/wiki/adblock2privoxy. Or even
better, you can download updated privoxy ready EasyList from
https://projects.zubr.me/wiki/adblock2privoxyDownloads and then run it through
adblock2privoxy. Debian "deb" package should be listed on the same site as well.

  cd ~
  wget https://s3.amazonaws.com/ab2p/adblock2privoxy_1.4.2_amd64.debian8.deb
  sudo dpkg -i adblock2privoxy_1.4.2_amd64.debian8.deb
  wget https://s3.amazonaws.com/ab2p/ab2p.easylist.7z
  sudo apt-get install p7zip-full
  7z x ab2p.easylist.7z
  sudo mkdir -p /var/www/privoxy
  sudo mv ab2p.easylist /var/www/privoxy
  cd /var/www/privoxy
  sudo cp ./ab2p.easylist/privoxy/* /etc/privoxy
  sudo nano /etc/privoxy/config
  
search for "actionsfile" (Ctrl+W) . add there these lines:
  actionsfile ab2p.system.action
  actionsfile ab2p.action

search for "actionsfile" (Ctrl+W) . add there these lines:
  filterfile ab2p.system.filter
  filterfile ab2p.filter
  
Save it and exit. Then restart privoxy:

  sudo service privoxy restart

Now we gonna finish this by installing web server, which is going to filter ad
elements on webpages i.e. hiding the blank space of an advertisment banner
(if possible). The web server will filter out the ad banners from the page
using CSS files located in "web" folder. Now we're going to set up web server and
privoxy for element filtering.

Install Apache webserver:

  sudo apt-get install apache2
  
Edit this file:

  sudo nano /etc/apache2/sites-available/000-default.conf
  
Replace it's contents with this (!! REPLACE "192.168.0.2" in "ServerName" attribute
with your domain name or IP address of the web server i.e. local IP address of the 
computer!!) (!! REPLACE the path in "DocumentRoot" attribute with the path, where 
you have saved your web folder with CSS files):

<VirtualHost *:80>
      #ab2p css domain name (optional, should be equal to --domainCSS parameter)
      ServerName 192.168.0.2

      #root = --webDir parameter value
      DocumentRoot /var/www/privoxy/ab2p.easylist/web


      RewriteEngine on

      # first reverse domain names order
      RewriteRule ^/([^/]*?)\.([^/.]+)(?:\.([^/.]+))?(?:\.([^/.]+))?(?:\.([^/.]$

      # then try to get CSS for current domain
      # if it is unavailable - get CSS for parent domain
      RewriteCond %{DOCUMENT_ROOT}/%{REQUEST_FILENAME} !-f
      RewriteRule (^.*/+)[^/]+/+ab2p.css$ $1ab2p.css [N]
</VirtualHost>


Save and exit.
Edit following file:

  sudo nano /etc/privoxy/ab2p.system.filter

and replace all occurences of "www.example.com" with your domain name or IP 
address ("Ctrl + \", enter "www.example.com" and then enter your domain
name or IP address of your web server).

If you would restart the apache2 web server now, it will complain that it doesn't
know the command "RewriteEngine". We have to manually enable it:

  sudo a2enmod rewrite
  
Restart privoxy and apache2:

  sudo service privoxy restart
  sudo service apache2 restart

Now everything should be done on the server side. Now you have to set up the client
machines and edit proxy server settings in browser or operating system.

Enjoy server wide adblocking with adblock plus level of support.
  
For more information and complete documentation, check out the site 
https://projects.zubr.me/wiki/adblock2privoxy

Sources:
https://www.youtube.com/watch?v=AaQYI1GbMEc
https://siderite.blogspot.com/2013/05/adblock-easylist-filter-and-action.html
